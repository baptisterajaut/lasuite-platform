{{- if .Values.apps.docs.enabled }}
{{- $seed := .Values.secretSeed | required "secretSeed is required" }}
---
apiVersion: v1
kind: Secret
metadata:
  name: docs-secrets
  namespace: {{ .Release.Namespace }}
  labels:
    {{- include "platform-configuration.labels" . | nindent 4 }}
    app: docs
  annotations:
    {{- include "reflector.annotations" "lasuite-docs" | nindent 4 }}
type: Opaque
stringData:
  # Django secret key
  DJANGO_SECRET_KEY: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-django-secret") }}"

  # Django superuser password
  DJANGO_SUPERUSER_PASSWORD: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-superuser") }}"

  # Database credentials
  DB_PASSWORD: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-db") }}"
  POSTGRES_PASSWORD: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-db") }}"

  # Redis credentials
  REDIS_URL: "redis://:{{ include "deriveSecret" (dict "seed" $seed "clientId" "redis") }}@{{ .Values.redis.host }}:{{ .Values.redis.port }}/0"
  DJANGO_CELERY_BROKER_URL: "redis://:{{ include "deriveSecret" (dict "seed" $seed "clientId" "redis") }}@{{ .Values.redis.host }}:{{ .Values.redis.port }}/1"

  # S3 credentials
  AWS_S3_ACCESS_KEY_ID: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "minio-access") }}"
  AWS_S3_SECRET_ACCESS_KEY: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "minio-secret") }}"

  # OIDC client credentials
  OIDC_RP_CLIENT_ID: "docs"
  OIDC_RP_CLIENT_SECRET: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-oidc-client") }}"

  # Collaboration server secret (Y-Provider)
  COLLABORATION_SERVER_SECRET: "{{ include "deriveSecret" (dict "seed" $seed "clientId" "docs-collaboration") }}"
{{- end }}
